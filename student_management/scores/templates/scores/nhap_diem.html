{% extends "accounts/base.html" %}
{% block content %}
<h2>Nhập điểm cho lớp {{ lop.name }} - Học kỳ {{ hoc_ky.hoc_ky_id }}</h2>

<form method="post">
    {% csrf_token %}
    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Học sinh</th>
                <th>Điểm miệng</th>
                <th>Điểm 15 phút</th>
                <th>Điểm 1 tiết</th>
                <th>Điểm cuối kỳ</th>
            </tr>
        </thead>
        <tbody>
            {% for hs in hoc_sinh_list %}
            <tr>
                <td>{{ hs.ho_ten }}</td>

                <!-- Điểm miệng nhiều ô nhập -->
                <td>
                    <div id="diem_mieng_container_{{ hs.id }}">
                        <input type="number" step="0.25" min="0" max="10" name="diem_mieng_{{ hs.id }}[]">
                    </div>
                    <button type="button" onclick="themDiem('{{ hs.id }}')">+</button>
                </td>

                <!-- Điểm 15 phút -->
                <td>
                    <input type="number" step="0.25" min="0" max="10" name="diem_15p_{{ hs.id }}">
                </td>

                <!-- Điểm 1 tiết -->
                <td>
                    <input type="number" step="0.25" min="0" max="10" name="diem_1tiet_{{ hs.id }}">
                </td>

                <!-- Điểm cuối kỳ -->
                <td>
                    <input type="number" step="0.25" min="0" max="10" name="diem_cuoiky_{{ hs.id }}">
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <button type="submit">Lưu điểm</button>
</form>

<script>
function themDiem(hsId) {
    const container = document.getElementById("diem_mieng_container_" + hsId);
    const input = document.createElement("input");
    input.type = "number";
    input.step = "0.25";
    input.min = "0";
    input.max = "10";
    input.name = "diem_mieng_" + hsId + "[]"; // mảng điểm miệng
    container.appendChild(input);
}
</script>
{% endblock %}
